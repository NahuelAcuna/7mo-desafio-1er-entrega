<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vista user</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h1>Bienvenido Usuario</h1>
    <hr>
    <h3>Listado de productos:</h3>
    <div id="products" class="product-list"></div>

    <script>
        fetch('/api/products')
            .then(r => r.json())
            .then(data => {
                //console.log(data)
                const products = document.getElementById('products')
                data.forEach(el => {
                    products.innerHTML += `<div class="product-card">
                                                <p>Producto: ${el.name}</p>
                                                <p>Categoria: <b>${el.code}</b></p>
                                                <p>Descripcion: <em>${el.description}</em></p>
                                                <p>Precio: $${el.price}</p>
                                                <button data-id="${el.id}" class="add">Agregar</button>
                                            </div>`
                });
                loadEvent()
            })
            .catch(e => console.log(e))

        function loadEvent() {
            const agregarCarrito = document.getElementsByClassName('add')
            for (const btn of agregarCarrito) {
                btn.onclick = (e => {
                    console.log(e.target.getAttribute('data-id'))
                })
            }
        }
    </script>
</body>
</html>